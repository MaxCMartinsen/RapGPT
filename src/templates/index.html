<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>RapGPT</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" href="./favicon.ico" type="image/x-icon">
</head>
<body>
  <main class="main-content">
    <h1 class="hallo">RapGPT</h1>
    
    <div class="top">
      <!-- <img src="{{ url_for('static', filename='recordicon.png') }}" id="recordButton" class="record-icon"> -->
      <p id="status" class="status-text">Not Recording</p>

      <button id="recordButton" class="record-btn">
        <p>Record</p>
      </button>
    </div>
    
    <div class="middle">
      <label for="beatcb" class="checkbox-label">
        <input type="checkbox" id="beatcb"> Beat
      </label>
      
      <label for="clonecb" class="checkbox-label">
        <input type="checkbox" id="clonecb"> Clone
      </label>
    </div>
    
    <div class="bottom">
      <!-- <audio controls id="audioControls" preload="auto">
        <source src="{{ url_for('static', filename='uploads/final_audio.mp3') }}" type="audio/mp3" id="srcAudio">
      </audio> -->

      <div id="audio1" class="audio-control">
        <audio controls>
            <source src="{{ url_for('static', filename='uploads/final_audio.mp3') }}" type="audio/mp3">
            Your browser does not support the audio element.
        </audio>
    </div>
    
    <div id="audio2" class="audio-control">
        <audio controls>
            <source src="{{ url_for('static', filename='uploads/merged_audio.mp3') }}" type="audio/mp3">
            Your browser does not support the audio element.
        </audio>
    </div>
    
    <div id="audio3" class="audio-control">
        <audio controls>
            <source src="{{ url_for('static', filename='uploads/speech.mp3') }}" type="audio/mp3">
            Your browser does not support the audio element.
        </audio>
    </div>
  </main>
  
  <script src="{{ url_for('static', filename='index.js') }}"></script>
  <script>
    document.addEventListener('click', (event) => {
        const beatCheckbox = document.getElementById('beatcb');
        const cloneCheckbox = document.getElementById('clonecb');

        // Hide all audio controls
        document.querySelectorAll('.audio-control').forEach(audio => {
            audio.style.display = 'none';
        });

        // Show the selected audio control based on checkbox state
        if (!beatCheckbox.checked && cloneCheckbox.checked) {
            document.getElementById('audio1').style.display = 'block';
        } else if (beatCheckbox.checked && cloneCheckbox.checked) {
            document.getElementById('audio2').style.display = 'block';
        } else if (!beatCheckbox.checked && !cloneCheckbox.checked) {
            document.getElementById('audio3').style.display = 'block';
        }
        else if (beatCheckbox.checked && !cloneCheckbox.checked) {
            document.getElementById('audio3').style.display = 'block';
        }
        
    });
    document.addEventListener('keydown', (event) => {
        const key = event.key;
        
        if (key === 'r') {
            // reload page
            location.reload();
        }
    });
</script>
</body>
</html>
