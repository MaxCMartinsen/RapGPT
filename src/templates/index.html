<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>RapGPT</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
  </head>
  <body>
    <main>
        <div class="top">
          <button id="recordButton">Start Recording</button>
          <p id="status">Not Recording</p>
      
          <!-- Link to the external JavaScript file -->
          <script src="{{ url_for('static', filename='index.js') }}"></script>
        </div>
        <div class="middle">
            <input type="checkbox" id = "beatcb">Beat</input>
           
            <input type="checkbox" id = "clonecb">Clone Voice</input>
        </div>
        <div class="bottom">
            <audio controls id = "audioControls">
              
                
               
              <source id = audio type="audio/mp3">
            </audio>

            <script>

              var audioControls = document.getElementById("audioControls");

              let currentSong = null
              let audioElement = document.getElementById("audio");
             audioElement.src = currentSong
              let beatcheckbox = false
              let clonecheckbox = false

             document.getElementById("beatcb").addEventListener("change", function() {
      var bcheckbox = document.getElementById("beatcb");
      

            // Check if the checkbox is checked
            if (bcheckbox.checked) {
              console.log("beat checkbox is checked");
              beatcheckbox = true
              // The variable you want to send to Python
              const myVariable = beatcheckbox;

              // Send the variable using fetch
              fetch('http://127.0.0.1:5000/receive-data', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Charset': 'UTF-8',
                'Accept': 'application/json'
            },
            body: JSON.stringify({ variable: myVariable })
        })
        .then(response => {
            if (!response.ok) {
                return response.text().then(text => { throw new Error(text) });
            }
            return response.json();
        })
        .then(data => {
            console.log('Response from server:', data);
        })
        .catch((error) => {
            console.error('Error:', error);
        });
            } else {
              console.log("beat checkbox is not checked");
              beatcheckbox = false
            }
          });


    document.getElementById("clonecb").addEventListener("change", function() {

      var clonecbox = document.getElementById("clonecb");

     

    if (clonecbox.checked) {
        console.log("clone checkbox is checked");
        clonecheckbox = true
      } else {
        console.log("clone checkbox is not checked");
        clonecheckbox = false
      }
    });

             
              
            </script>
        </div>
    </main>
    <script src="index.js"></script>
  </body>
</html>